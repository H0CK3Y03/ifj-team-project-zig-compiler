.IFJcode24
CALL main
EXIT int@0

LABEL &strcmp
DEFVAR TF@&strcmp_cnt

LT TF@&strcmp_cnt TF@s1 TF@s2
JUMPIFEQ &strcmp_smaller TF@&strcmp_cnt bool@true

GT TF@&strcmp_cnt TF@s1 TF@s2
JUMPIFEQ &strcmp_bigger TF@&strcmp_cnt bool@true

MOVE TF@&strcmp_res int@0
RETURN

LABEL &strcmp_smaller
MOVE TF@&strcmp_res int@-1
RETURN

LABEL &strcmp_bigger
MOVE TF@&strcmp_res int@1
RETURN


LABEL &substring
MOVE TF@&substring_res string@

DEFVAR TF@&substring_err_cnt
LT TF@&substring_err_cnt TF@i int@0
JUMPIFEQ &substring_err TF@&substring_err_cnt bool@true
LT TF@&substring_err_cnt TF@j int@0
JUMPIFEQ &substring_err TF@&substring_err_cnt bool@true
LT TF@&substring_err_cnt TF@j TF@i
JUMPIFEQ &substring_err TF@&substring_err_cnt bool@true

DEFVAR TF@&substring_strlen
STRLEN TF@&substring_strlen TF@s

GT TF@&substring_err_cnt TF@j TF@&substring_strlen
JUMPIFEQ &substring_err TF@&substring_err_cnt bool@true

LT TF@&substring_err_cnt TF@i TF@&substring_strlen
NOT TF@&substring_err_cnt TF@&substring_err_cnt
JUMPIFEQ &substring_err TF@&substring_err_cnt bool@true

DEFVAR TF@&substring_char

LABEL &substring_loop

GETCHAR TF@&substring_char TF@s TF@i

CONCAT TF@&substring_res TF@&substring_res TF@&substring_char

ADD TF@i TF@i int@1
JUMPIFNEQ &substring_loop TF@i TF@j

RETURN

LABEL &substring_err
MOVE TF@&substring_res nil@nil
RETURN

LABEL main
CREATEFRAME

DEFVAR TF@a
MOVE TF@a string@abc

DEFVAR TF@c


PUSHFRAME
CREATEFRAME
DEFVAR TF@&substring_res
DEFVAR TF@s
DEFVAR TF@i
DEFVAR TF@j

MOVE TF@s LF@a
MOVE TF@i int@1
MOVE TF@j int@2

CALL &substring

MOVE LF@c TF@&substring_res
POPFRAME

WRITE TF@c
WRITE string@\010

RETURN




LABEL decrement

LABEL factorial